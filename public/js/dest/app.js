"use strict";angular.module("Authentication",[]),angular.module("MainApp",[]),angular.module("ModifyItem",[]),angular.module("keepInStockApp",["Authentication","MainApp","ModifyItem","ngRoute","ngCookies"]).config(["$routeProvider","$locationProvider",function(o,t){o.when("/",{templateUrl:"views/main.html",controller:"AuthenticationController"}).when("/login",{templateUrl:"views/login.html",controller:"AuthenticationController"}).when("/register",{templateUrl:"views/register.html",controller:"AuthenticationController"}).when("/home",{templateUrl:"views/home.html",controller:"MainAppController"}).when("/add",{templateUrl:"views/add.html",controller:"MainAppController"}).when("/modify",{templateUrl:"views/modify.html",controller:"ModifyItemController"}).otherwise({redirectTo:"/"}),t.html5Mode({enabled:!0,requireBase:!1})}]).run(["$rootScope","$location","$cookieStore","$http",function(o,t,e,n){o.globals=e.get("globals")||{},o.globals.currentUser?(n.defaults.headers.common.Authorization="Bearer "+o.globals.currentUser.token,o.loggedIn=!0):o.loggedIn=!1,o.$on("$locationChangeStart",function(e,n,l){"/home"!=t.path()||o.globals.currentUser||t.path("/login")}),o.$on("$locationChangeStart",function(e,n,l){"/add"!=t.path()||o.globals.currentUser||t.path("/login")}),o.$on("$locationChangeStart",function(e,n,l){"/home"!=t.path()||o.globals.currentUser||t.path("/login")}),o.$on("$locationChangeStart",function(e,n,l){"/modify"!=t.path()||o.globals.currentUser||t.path("/login")}),o.$on("$locationChangeStart",function(e,n,l){"/login"!=t.path()&&"/register"!=t.path()||!o.globals.currentUser||t.path("/home")})}]);"use strict";angular.module("Authentication").factory("AuthenticationService",["$http","$cookieStore","$location","$rootScope","$timeout",function(e,t,o,n,i){var r={};return r.RefreshToken=function(){e.get("/api/users/refresh").success(function(e){e.token&&(r.ClearCredentials(),r.SetCredentials(e.token),console.log("Token refreshed."))}).error(function(e){r.ClearCredentials(),o.path("/login")})},r.Login=function(t,o,n){e.post("/api/users/login",{email:t,password:o}).success(function(e){n(e)})},r.Register=function(t,o,n,i){e.post("/api/users/register",{name:t,email:o,password:n}).success(function(e){i(e)})},r.SetCredentials=function(o){n.globals={currentUser:{token:o}},e.defaults.headers.common.Authorization="Bearer "+o,t.put("globals",n.globals)},r.ClearCredentials=function(){n.globals={},t.remove("globals"),e.defaults.headers.common.Authorization="Bearer "},r}]),angular.module("MainApp").factory("MainAppService",["$http","$cookieStore","$rootScope","$timeout",function(e,t,o,n){var i={};return i.AddItem=function(t,o,n,i,r,s,c){e.post("/api/inventory/add",{title:t,cost:o,price:n,sku:i,quantity:r,details:s}).success(function(e){c(e)})},i.GetAllItems=function(t){e.get("/api/inventory/list").success(function(e){t(e)})},i.DeleteItem=function(t,o){e.post("/api/inventory/remove",{id:t}).success(function(e){o(e)})},i}]),angular.module("ModifyItem").factory("ModifyItemService",["$http","$cookieStore","$rootScope","$timeout",function(e,t,o,n){var i={},r=null;return i.SaveItem=function(t,o,n,i,r,s,c,u){e.post("/api/inventory/edit",{id:t,title:o,cost:n,price:i,sku:r,quantity:s,details:c}).success(function(e){u(e)})},i.SetItem=function(e){r=e},i.GetItem=function(){return r},i}]);